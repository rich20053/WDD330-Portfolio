<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Team Activity Week 4</title>
    <link rel="stylesheet" href="../../css/style.css" /> 
    <link rel="stylesheet" href="../css/week_style.css" />
</head>
  <body class="teamactivity">
    <h1>Team Activity Week 4</h1>
    <h2>Tic Tac Toe</h2>
    <!-- Tic Tac Toe Board -->
    <section id="board">
        <div id="tl" class="square top left"></div>
        <div id="tc" class="square top center"></div>
        <div id="tr" class="square top right"></div>
        <div id="ml" class="square middle left"></div>
        <div id="mc" class="square middle center"></div>
        <div id="mr" class="square middle right"></div>
        <div id="bl" class="square bottom left"></div>
        <div id="bc" class="square bottom center"></div>
        <div id="br" class="square bottom right"></div>
        <h3 id="winner">Have fun!</h3>
        <button onclick="location.reload()">Reset Game</button>
    </section>
</body>
  <footer>
    <p>&copy; <span id="thisyear"></span> | Mark Richmond | Utah | <a href="../index.html">Week 4</a>| <a href="../../index.html">Home</a></p>
    <p id="datemodified"></p><br>
  </footer>
   <script src="../../javascript/this-year.js"></script>
   <script src="../../javascript/last-modified.js"></script>
   <script>
        const trSquare = document.getElementById('tr');
        const tlSquare = document.getElementById('tl');
        const tcSquare = document.getElementById('tc');
        const mlSquare = document.getElementById('ml');
        const mcSquare = document.getElementById('mc');
        const mrSquare = document.getElementById('mr');
        const blSquare = document.getElementById('bl');
        const bcSquare = document.getElementById('bc');
        const brSquare = document.getElementById('br');
        //
        tlSquare.addEventListener('touchend', () => turn("tl"));
        tcSquare.addEventListener('touchend', () => turn("tc"));
        trSquare.addEventListener('touchend', () => turn("tr"));
        mlSquare.addEventListener('touchend', () => turn("ml"));
        mcSquare.addEventListener('touchend', () => turn("mc"));
        mrSquare.addEventListener('touchend', () => turn("mr"));
        blSquare.addEventListener('touchend', () => turn("bl"));
        bcSquare.addEventListener('touchend', () => turn("bc"));
        brSquare.addEventListener('touchend', () => turn("br"));
        
        var player = true;
        var game_over = false;
        
        function turn(space) {
            if (document.getElementById(space).textContent == "" && !game_over) {
                if (player) {  
                    document.getElementById(space).innerHTML = "X";        
                }   
                else {
                    document.getElementById(space).innerHTML = "O";
                }
                player = !player;
                game_end();
            }
        }

        function game_end() {
            // check win options
            var winner = "";
            var toprow = document.getElementsByClassName("top");
            if (winner==""&&toprow[0].textContent==toprow[1].textContent&&toprow[0].textContent==toprow[2].textContent)
                winner = toprow[0].textContent;
            var middlerow = document.getElementsByClassName("middle");
            if (winner==""&&middlerow[0].textContent==middlerow[1].textContent&&middlerow[0].textContent==middlerow[2].textContent)
                winner = middlerow[0].textContent;
            var bottomrow = document.getElementsByClassName("bottom");
            if (winner==""&&bottomrow[0].textContent==bottomrow[1].textContent&&bottomrow[0].textContent==bottomrow[2].textContent)
                winner = bottomrow[0].textContent;
            if (winner==""&&toprow[0].textContent==middlerow[0].textContent&&toprow[0].textContent==bottomrow[0].textContent)
                winner = toprow[0].textContent;
            if (winner==""&&toprow[1].textContent==middlerow[1].textContent&&toprow[1].textContent==bottomrow[1].textContent)
                winner = toprow[1].textContent;
            if (winner==""&&toprow[2].textContent==middlerow[2].textContent&&toprow[2].textContent==bottomrow[2].textContent)
                winner = toprow[2].textContent;
            if (winner==""&&toprow[0].textContent==middlerow[1].textContent&&toprow[0].textContent==bottomrow[2].textContent)
                winner = toprow[0].textContent;
            if (winner==""&&bottomrow[0].textContent==middlerow[1].textContent&&bottomrow[0].textContent==toprow[2].textContent)
                winner = bottomrow[0].textContent;
            var square = document.querySelectorAll("div");
            var full = true;
            for (var i=0; i<square.length; i++) {
                if (square[i].textContent == undefined || square[i].textContent == "") {
                    full = false;
                    break;
                }
            }
            if (winner != "") {
                game_over = true;
                document.getElementById("winner").innerHTML = winner + " wins the game!";            
            }
            if (full)  {
                game_over = true;
                document.getElementById("winner").innerHTML = "It's a tie!";
            }
        }

    </script>
</html>
